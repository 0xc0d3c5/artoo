!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.domino=e()}}(function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){!function(e){"use strict";var r,i,o="Boolean Number String Function Array Date RegExp Object".split(" "),s={},a=["*"],h={};for(r in o)i=o[r],a.push(i.toLowerCase()),s["[object "+i+"]"]=i.toLowerCase();var l={version:"0.1.0",add:function(e,t){var n,r,i,o,s,l;if(1===arguments.length){if("object"!==this.get(e))throw new Error("If types.add is called with one argument, this one has to be an object.");n=e,o=n.id,l=n.type}else{if(2!==arguments.length)throw new Error("types.add has to be called with one or three arguments.");if("string"!=typeof e||!e)throw new Error("If types.add is called with more than one argument, the first one must be the string id.");o=e,l=t}if("string"!==this.get(o)||0===o.length)throw new Error("A type requires an string id.");if(void 0!==h[o]&&"proto"!==h[o])throw new Error('The type "'+o+'" already exists.');if(~a.indexOf(o))throw new Error('"'+o+'" is a reserved type name.');h[o]=1,i=(n||{}).proto||[],i=Array.isArray(i)?i:[i],s={};for(r in i)void 0===h[i[r]]&&(h[i[r]]=1,s[i[r]]=1);if("function"!==this.get(l)&&!this.isValid(l))throw new Error("A type requires a valid definition. This one can be a preexistant type or else a function testing given objects.");if(h[o]=void 0===n?{id:o,type:l}:{},void 0!==n)for(r in n)h[o][r]=n[r];for(r in s)r!==o&&delete h[r]},has:function(e){return!!h[e]},get:function(e){return null===e||void 0===e?String(e):s[Object.prototype.toString.call(e)]||"object"},check:function(e,t){var n,r,i,o=this.get(e);if("string"===this.get(t)){n=t.replace(/^\?/,"").split(/\|/);for(r in n)if(a.indexOf(n[r])<0&&!(n[r]in h))throw new Error("Invalid type.");if(null===e||void 0===e)return!!t.match(/^\?/,"");t=t.replace(/^\?/,"");for(r in n)if(h[n[r]]&&("function"==typeof h[n[r]].type?h[n[r]].type(e)===!0:this.check(e,h[n[r]].type)))return!0;return!(!~n.indexOf("*")&&!~n.indexOf(o))}if("object"===this.get(t)){if("object"!==o)return!1;for(i in t)if(!this.check(e[i],t[i]))return!1;for(i in e)if(void 0===t[i])return!1;return!0}if("array"===this.get(t)){if("array"!==o)return!1;if(1!==t.length)throw new Error("Invalid type.");for(i in e)if(!this.check(e[i],t[0]))return!1;return!0}return!1},isValid:function(e){var t,n,r;if("string"===this.get(e)){t=e.replace(/^\?/,"").split(/\|/);for(r in t)if(a.indexOf(t[r])<0&&!(t[r]in h))return!1;return!0}if("object"===this.get(e)){for(n in e)if(!this.isValid(e[n]))return!1;return!0}return"array"===this.get(e)?1===e.length?this.isValid(e[0]):!1:!1}};l.add("type",function(e){return l.isValid(e)}),"undefined"!=typeof n&&("undefined"!=typeof t&&t.exports&&(n=t.exports=l),n.types=l),e.types=l}(this)},{}],2:[function(e,t){"use strict";var n=function(){this._handlers={},this._handlersAll=[]};n.prototype.on=function(e,t){var r,i,o,s;if(1===arguments.length&&"object"==typeof arguments[0])for(o in arguments[0])n.prototype.on.call(this,o,arguments[0][o]);else if(1===arguments.length&&"function"==typeof arguments[0])this._handlersAll.push({handler:arguments[0]});else{if(2!==arguments.length||"function"!=typeof arguments[1])throw new Error("Wrong arguments.");for(s="string"==typeof e?[e]:e,r=0,i=s.length;r!==i;r+=1)o=s[r],o&&(this._handlers[o]||(this._handlers[o]=[]),this._handlers[o].push({handler:t}))}return this},n.prototype.off=function(e,t){var n,r,i,o,s,a,h,l="string"==typeof e?[e]:e;if(arguments.length){if(1===arguments.length&&"function"!=typeof l)for(n=0,r=l.length;n!==r;n+=1)delete this._handlers[l[n]];else if(1===arguments.length&&"function"==typeof l){t=arguments[0];for(s in this._handlers){for(a=[],n=0,r=this._handlers[s].length;n!==r;n+=1)this._handlers[s][n].handler!==t&&a.push(this._handlers[s][n]);this._handlers[s]=a}for(a=[],n=0,r=this._handlersAll.length;n!==r;n+=1)this._handlersAll[n].handler!==t&&a.push(this._handlersAll[n]);this._handlersAll=a}else if(2===arguments.length)for(n=0,r=l.length;n!==r;n+=1){if(h=l[n],this._handlers[h]){for(a=[],i=0,o=this._handlers[h].length;i!==o;i+=1)this._handlers[h][i].handler!==t&&a.push(this._handlers[h][i]);this._handlers[h]=a}this._handlers[h]&&0===this._handlers[h].length&&delete this._handlers[h]}}else{this._handlersAll=[];for(s in this._handlers)delete this._handlers[s]}return this},n.prototype.emit=function(e,t){var n,r,i,o,s,a,h,l,f="string"==typeof e?[e]:e;for(t=void 0===t?{}:t,n=0,r=f.length;n!==r;n+=1)if(l=f[n],h=(this._handlers[l]||[]).concat(this._handlersAll),h.length){for(a={type:l,data:t||{},target:this},s=[],i=0,o=h.length;i!==o;i+=1)h[i].handler(a),h[i].one||s.push(h[i]);this._handlers[l]=s}return this},n.prototype.binder=function(){var e=new r(this);return arguments.length&&e.on.apply(e,arguments),e};var r=function(e){n.call(this),this._emitter=e,this._enabled=!0};r.prototype.on=function(){return n.prototype.on.apply(this,arguments),this._enabled&&this._emitter.on.apply(this._emitter,arguments),this},r.prototype.off=function(){return n.prototype.off.apply(this,arguments),this._enabled&&this._emitter.off.apply(this._emitter,arguments),this},r.prototype.enable=function(){var e,t,n;if(this._enabled)return this;for(this._enabled=!0,t=this._handlersAll,n=t.length-1;n>=0;n--)this._emitter.on(t[n].handler);for(e in this._handlers)for(t=this._handlers[e],console.log(e,t),n=t.length-1;n>=0;n--)this._emitter.on(e,t[n].handler);return this},r.prototype.disable=function(){var e,t,n;if(!this._enabled)return this;for(n=this._emitter._handlersAll,e=n.length-1;e>=0;e--)this._handlersAll.find(function(t){return t.handler===n[e].handler})&&n.splice(e,1);for(t in this._handlers)for(n=this._handlers[t],e=n.length-1;e>=0;e--)this._emitter.off(t,n[e].handler);return this._enabled=!1,this},t.exports=n},{}],3:[function(e,t){"use strict";function n(e){if(!e)return e;var t,i,o;if(r.check(e,"array"))for(t=[],i=0,o=e.length;o>i;i++)t.push(n(e[i]));else if(r.check(e,"date"))t=new Date(e.getTime());else if(r.check(e,"object"))if(e.nodeType&&"function"==typeof e.cloneNode)t=e;else if(e.prototype)t=e;else{t={};for(i in e)t[i]=n(e[i])}else t=e;return t}var r=e("typology");t.exports={clone:n}},{typology:1}],4:[function(e,t){(function(e){"use strict";function n(e,t){var n=[(r?"%c":"")+"[domino]"];r&&n.push("color:"+e),n=n.concat(Array.prototype.slice.call(arguments,2)),console[t].apply(console,i?n:[n.map(function(e){return""+e}).join(" ")])}var r="chrome"in e||"navigator"in e&&navigator.userAgent.match(/firefox/i),i=r||"undefined"==typeof window&&"undefined"!=typeof e,o={debug:"#000099",info:"#009900",warn:"#FF1500",die:"#FF0000"};t.exports={debug:function(){n.apply(null,[o.debug,"log"].concat(Array.prototype.slice.call(arguments,0)))},info:function(){n.apply(null,[o.info,"log"].concat(Array.prototype.slice.call(arguments,0)))},warn:function(){n.apply(null,[o.warn,"warn"].concat(Array.prototype.slice.call(arguments,0)))},die:function(){n.apply(null,[o.die,"error"].concat(Array.prototype.slice.call(arguments,0)))}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t){"use strict";function n(e){return{componentWillMount:function(){if(this[e.settings("mixinControllerName")]=e,this.renderOn){if(!r.check(this.renderOn,["string"])&&!r.check(this.renderOn,"string"))throw new Error("MESSAGE_TO_BE_DECIDED");this.__listener=function(){this.forceUpdate()}.bind(this)}},componentDidMount:function(){this.renderOn&&("string"==typeof this.renderOn?[this.renderOn]:this.renderOn).forEach(function(t){e.on(t,this.__listener)},this)},componentWillUnmount:function(){this.renderOn&&("string"==typeof this.renderOn?[this.renderOn]:this.renderOn).forEach(function(t){e.off(t,this.__listener)},this)}}}var r=e("typology");t.exports=n},{typology:1}],6:[function(e,t){"use strict";var n=e("typology"),r=e("./domino.logger.js"),i=e("./domino.helpers.js"),o=e("./domino.emitter.js"),s=e("./domino.react.js");n.add("domino.events",function(e){return"string"==typeof e||n.check(e,["string"])}),n.add("domino.name",function(e){return"string"==typeof e&&!!e.match(/^[a-zA-Z_$-][a-zA-Z_$0-9-]*$/)}),n.add("domino.property",function(e){return n.check(e,{id:"domino.name",type:"?type",description:"?string",namespace:"?domino.name",emit:"?domino.events",value:"?*"})&&(!e.type||n.check(e.value,e.type))}),n.add("domino.facet",{id:"domino.name",description:"?string",namespace:"?domino.name",get:"function"});var a={update:{type:"string",property:"string",value:"*"},emit:{type:"string",events:"string|array",data:"?*"}};n.add("domino.order",function(e){return n.check(e,"object")&&n.check(e.type,"string")&&n.check(e,a[e.type])});var h={mixinControllerName:"control",errorMessage:"error from domino",verbose:!0},l={},f=function(){var e=0;return function(){return""+ ++e}}(),u=function(e){function t(){w&&b.die("The execution is not unlocked yet"),_=null,w=!0,x=k,k=[];for(var e,n,r,i,o,s,a,h,l={},f={};h=x.shift();)switch(h.type){case"update":l[h.property]?l[h.property].value!==h.value&&b.die('You are trying to update the property "'+h.property+'" with the values',l[h.property].value,"and",h.value,"at the same time."):l[h.property]=h;break;case"emit":for(s=Array.isArray(h.events)?h.events:[h.events],n=0,i=s.length;i>n;n++)if(f[s[n]])if("data"in h)f[s[n]].push(h);else{for(a=f[s[n]],r=0,o=a.length;o>r&&"data"in a[r];r++);a.push(h)}else f[s[n]]=[h];break;default:b.die('Unknown order type "'+h.type+'"')}for(e in l)m(e,l[e].value);for(e in f)E.emit(e,f[e][0].data);w=!1,k.length&&(_=setTimeout(t,0))}function a(e,r){return n.check(e,"domino.order")||b.die("Wrong type for order",e),k.push(e),_||w||(r?t():_=setTimeout(t,0)),this}function u(e,t){if(1===arguments.length){n.check(e,"object")||this.die("Wrong arguments.");var r;for(r in e)this.update(r,e[r])}else 2===arguments.length&&(n.check(e,"domino.name")||this.die("Invalid property name."),A[e]||b.die('The property "'+e+'" does not exist.'),A[e].type&&!n.check(t,A[e].type)&&b.die('Wrong type for "'+e+'".'),a({type:"update",property:e,value:t}));return this}function d(e){return n.check(e,"object")||b.die("Wrong type."),e.facets&&y(e.facets),e.properties&&p(e.properties),this}function c(e){if(1===arguments.length){if(n.check(e,"string"))return c.call(this,{id:e});n.check(e,"domino.property")||b.die("Wrong type."),j[e.id]&&b.die('A facet named "'+e.id+'" already exists.'),A[e.id]&&b.die('The property "'+e.id+'" already exists.'),A[e.id]=i.clone(e)}else if(2===arguments.length){var t,r=e;return e=arguments[1],"string"==typeof e?t={id:r,type:e}:"object"==typeof e&&(t=i.clone(e),t.id=r),c.call(this,t)}return this}function p(e){var t,r,i;if(1===arguments.length){if(n.check(e,"domino.property|string"))c.call(this,e);else if(n.check(e,"array"))for(t=0,r=e.length;r>t;t++)c.call(this,e[t]);else if(n.check(e,"object"))for(i in e)c.call(this,i,e[i])}else c.apply(this,arguments);return this}function g(e){if(1===arguments.length)n.check(e,"domino.facet")||b.die("Wrong type."),A[e.id]&&b.die('A property named "'+e.id+'" already exists.'),j[e.id]&&b.die('The facet "'+e.id+'" already exists.'),j[e.id]=i.clone(e);else if(2===arguments.length){var t,r=e;return e=arguments[1],"function"==typeof e?t={id:r,get:e}:"object"==typeof e&&(t=i.clone(e),t.id=r),g.call(this,t)}return this}function y(e){var t,r,i;if(1===arguments.length){if(n.check(e,"domino.facet"))g.call(this,e);else if(n.check(e,"array"))for(t=0,r=e.length;r>t;t++)g.call(this,e[t]);else if(n.check(e,"object"))for(i in e)g.call(this,i,e[i])}else g.apply(this,arguments);return this}function m(e,t){n.check(e,"domino.name")||b.die("Invalid property name.");var r=A[e];return r||b.die('The property "'+e+'" does not exist.'),r.type&&!n.check(t,r.type)&&b.die('Wrong type for "'+e+'".'),r.value=t,r.emit&&a({type:"emit",events:r.emit}),this}function v(e){if(1!==arguments.length){var t,r,i=arguments,o={};for(t=0,r=i.length;r>t;t++)o[i[t]]=v(i[t]);return o}if("string"==typeof e){if(n.check(e,"domino.name")||b.die("Invalid property name."),A[e])return A[e].value;if(j[e])return j[e].get.call(b);b.die('The property "'+e+'" does not exist.')}else{if(n.check(e,"array")){var t,r,i=e,o=[];for(t=0,r=i.length;r>t;t++)o.push(v(i[t]));return o}b.die("Wrong arguments.")}}var _,w,b=this,k=[],x=[],j={},A={},E=new o,O=s(this);if(e){if("string"==typeof e.name)this.name=e.name;else{if("name"in e)throw new Error("Wrong type for domino instance name");this.name=f()}if(l[this.name])throw new Error('Domino instance named "'+this.name+'" already exists');l[this.name]=this,d(e)}this.register=d,this.registerFacet=g,this.registerFacets=y,this.registerProperty=c,this.registerProperties=p,this.update=u,this.get=v,this.mixin=O,this.binder=function(){return E.binder.apply(E,arguments)},this.on=function(){return E.on.apply(E,arguments),this},this.off=function(){return E.off.apply(E,arguments),this},this.emit=function(e,t){return a({type:"emit",events:e,data:t}),this},this.settings=function(e,t){if("string"==typeof e&&1===arguments.length)return h[e];var n="object"==typeof e&&1===arguments.length?e||{}:{};"string"==typeof e&&(n[e]=t);for(var r in n)void 0!==n[r]?h[r]=n[r]:delete h[r];return this},this.debug=function(){b.settings("verbose")&&r.debug.apply(r,arguments)},this.info=function(){b.settings("verbose")&&r.info.apply(r,arguments)},this.warn=function(){b.settings("verbose")&&r.warn.apply(r,arguments)},this.die=function(){throw b.settings("verbose")&&r.die.apply(r,arguments),new Error(b.settings("errorMessage")||"")},this.kill=function(){var e;b=null,k=null,x=null,_=null,w=null,j=null,A=null,E.off(),E=null;for(e in this)this.hasOwnProperty(e)&&(this.k=null);l[this.name]=null}};u.types=n,u.helpers=i,u.emitter=o,u.settings=h,u.instances=function(e){return arguments.length?l[e]:i.clone(l)},t.exports=u},{"./domino.emitter.js":2,"./domino.helpers.js":3,"./domino.logger.js":4,"./domino.react.js":5,typology:1}]},{},[6])(6)});
